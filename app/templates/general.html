{% extends "layout.html" %}

{% block body %}
<style>
    body,
    html {
        height: 100%;
    }

    .full-height {
        height: 88vh;
        /* Ocupa el 100% de la altura de la pantalla */
    }

    .h-70 {
        height: 70%;
        /* 3/4 de la altura */
    }

    .h-30 {
        height: 30%;
        /* 1/4 de la altura */
    }

    .h-40 {
        height: 40%;
    }

    .h-60 {
        height: 60%;
    }

    /* grafico ingresos historico de ej */
    .container {
        width: 90%;
        max-width: 800px;
        height: 35%;
        background: #fff;
        padding: 20px;

        position: relative;
    }

    .container h2 {
        position: absolute;
        top: 10px;
        left: 20px;
        font-size: 16px;
        color: #333;
        margin: 0;
    }


    /* botones del mini menu */
    .button-container {
        display: flex;
        justify-content: space-between;
        margin: 80px;
    }

    .square-button {
        width: 80px;
        height: 80px;
        background-color: #4CAF50;
        color: white;
        font-size: 16px;
        border: none;
        cursor: pointer;
        border-radius: 10px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }

    .square-button:hover {
        background-color: #45a049;
    }

    .modal-content {
        border-radius: 15px;
    }

    .modal-dialog {
        max-width: 50%;
    }

    .form-group {
        margin-bottom: 1rem;
    }

    .form-row {
        margin-bottom: 1rem;
    }

    .table tbody tr:nth-child(odd) {
        background-color: #f9f9f9;
    }

    .table tbody tr:nth-child(even) {
        background-color: #ffffff;
    }

    .table td:last-child {
        text-align: right;
    }
</style>

<div class="container-fluid full-height">
    <div class="row h-100">
        <div class="col-4 d-flex flex-column">
            <div class="h-70 border border-primary">
                <!-- ingresos y estadisticas -->
                <h4>Ingresos Totales</h4>
                <h3>$</h3>
                <p>Ultima Actualizacion 22/01 11:02</p>

                <div class="container">
                    <canvas id="ingresosChart"></canvas>
                </div>

                <h4>Equipos Inscriptos</h4>
                <h3>83</h3>
                <p>Ultima Actualizacion 22/01 11:02</p>

                <h4>Concurrencia estimada</h4>
                <h3>1289</h3>
                <p>Ultima Actualizacion 22/01 11:02</p>
            </div>
            <div class="h-30 border border-dark">
                <!-- Panel de control -->
                <div class="button-container">
                    <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#extra-stats-menu">
                        OTHER STATS
                    </button>
                    <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#users-menu">
                        USERS MANAGE
                    </button>
                    <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#settings-menu">
                        SETTINGS
                    </button>
                </div>
            </div>
        </div>

        <div class="col-8 d-flex flex-column">
            <div class="h-40 border border-success">
                <!-- graficos circulares -->
                Segunda sección, 1/3
            </div>
            <div class="h-60 border border-danger">
                <!-- registro de inscripciones -->
                Segunda sección, 2/3
            </div>
        </div>
    </div>
</div>

<!-- Modal de estadisticas extras -->

<div class="modal fade" id="extra-stats-menu" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
    aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">ESTADISTICAS SECUNDARIAS</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <!-- aqui las estditicas nesesarias -->
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<!-- Modal de usuarios -->

<div class="modal fade" id="users-menu" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
    aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">USERS MANAGER</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <button type="button" class="btn btn-success" data-dismiss="modal"
                style="max-width: 22%; margin-left: 20px;">Agregar User</button>
            <div class="modal-body">
                <table class="table">
                    <thead>
                        <tr>
                            <th scope="col">USER</th>
                            <th scope="col">TAG</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Row 2 Col 1</td>
                            <td>Row 2 Col 2</td>
                            <td>
                                <input class="form-check-input border border-dark" type="checkbox" id="switch1"
                                    style="border: 2px solid #000;">
                                <label class="form-check-label" for="switch3">ADMIN</label>
                                <button class="btn btn-primary btn-sm">Edit</button>
                                <button class="btn btn-danger btn-sm">Delete</button>
                            </td>
                        </tr>

                    </tbody>
                </table>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary">Save changes</button>
            </div>
        </div>
    </div>
</div>

<!-- Modal de settings -->
<div class="modal fade" id="settings-menu" tabindex="-1" role="dialog" aria-labelledby="configModalLabel"
    aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="configModalLabel">AJUSTES GENERALES</h4>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <form>
                    <div class="form-row">
                        <div class="col-12 mb-3" style="display: flex;">

                            <div class="form-check form-check-inline">
                                <input class="form-check-input border border-dark" type="checkbox" id="switch1"
                                    style="border: 2px solid #000;">
                                <label class="form-check-label" for="switch1">desactivar solicitudes de
                                    incripcionen</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="checkbox" id="switch2">
                                <label class="form-check-label" for="switch2">desactivar panel de inscripciones</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="checkbox" id="switch3">
                                <label class="form-check-label" for="switch3">desactivar panel de partidos</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="checkbox" id="switch4">
                                <label class="form-check-label" for="switch4">otra opcion que podria ser util</label>
                            </div>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="col-12 mb-3">
                            <h5>Cupos Disponibles</h5>
                            <div class="row">
                                <div class="col-md-4 mb-2">
                                    <label for="cupos1">Evento 1</label>
                                    <input type="number" class="form-control" id="cupos1" placeholder="Cupos">
                                </div>
                                <div class="col-md-4 mb-2">
                                    <label for="cupos2">Evento 2</label>
                                    <input type="number" class="form-control" id="cupos2" placeholder="Cupos">
                                </div>
                                <div class="col-md-4 mb-2">
                                    <label for="cupos3">Evento 3</label>
                                    <input type="number" class="form-control" id="cupos3" placeholder="Cupos">
                                </div>
                                <div class="col-md-4 mb-2">
                                    <label for="cupos4">Evento 4</label>
                                    <input type="number" class="form-control" id="cupos4" placeholder="Cupos">
                                </div>
                                <div class="col-md-4 mb-2">
                                    <label for="cupos5">Evento 5</label>
                                    <input type="number" class="form-control" id="cupos5" placeholder="Cupos">
                                </div>
                                <div class="col-md-4 mb-2">
                                    <label for="cupos6">Evento 6</label>
                                    <input type="number" class="form-control" id="cupos6" placeholder="Cupos">
                                </div>
                                <div class="col-md-4 mb-2">
                                    <label for="cupos7">Evento 7</label>
                                    <input type="number" class="form-control" id="cupos7" placeholder="Cupos">
                                </div>
                                <div class="col-md-4 mb-2">
                                    <label for="cupos8">Evento 8</label>
                                    <input type="number" class="form-control" id="cupos8" placeholder="Cupos">
                                </div>
                                <div class="col-md-4 mb-2">
                                    <label for="cupos9">Evento 9</label>
                                    <input type="number" class="form-control" id="cupos9" placeholder="Cupos">
                                </div>
                                <div class="col-md-4 mb-2">
                                    <label for="cupos10">Evento 10</label>
                                    <input type="number" class="form-control" id="cupos10" placeholder="Cupos">
                                </div>
                                <div class="col-md-4 mb-2">
                                    <label for="cupos11">Evento 11</label>
                                    <input type="number" class="form-control" id="cupos11" placeholder="Cupos">
                                </div>
                                <div class="col-md-4 mb-2">
                                    <label for="cupos12">Evento 12</label>
                                    <input type="number" class="form-control" id="cupos12" placeholder="Cupos">
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="col-6">
                            <label for="fechaCierre">Fecha de Cierre de Inscripciones</label>
                            <input type="date" class="form-control" id="fechaCierre">
                        </div>
                        <div class="col-6">
                            <label for="fechaCopa">Fecha de la Copa</label>
                            <input type="date" class="form-control" id="fechaCopa">
                        </div>
                    </div>

                </form>
            </div>

            <div class="modal-footer d-flex">
                <button type="button" class="btn btn-primary mr-auto" data-toggle="modal" data-target="#advance-settings-menu">
                    Advance Menu
                </button>
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary">Save changes</button>
            </div>
            
        </div>
    </div>
</div>


<div class="modal fade" id="passwordModal" tabindex="-1" role="dialog" aria-labelledby="passwordModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="passwordModalLabel">Ingrese la Clave</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <form id="passwordForm">
                        <div class="form-group">
                            <label for="passwordInput">Clave</label>
                            <input type="password" class="form-control" id="passwordInput" placeholder="Ingrese su clave" required>
                        </div>
                        <div class="alert alert-danger d-none" id="errorAlert">
                            Clave incorrecta. Inténtelo de nuevo.
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Cerrar</button>
                    <button type="button" class="btn btn-primary" onclick="validatePassword()">Enviar</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal de Confirmación -->
    <div class="modal fade" id="confirmModal" tabindex="-1" role="dialog" aria-labelledby="confirmModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="confirmModalLabel">¿Está seguro de que desea eliminar este arrendatario?</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <p>Eliminar un arrendatario lo eliminará permanentemente de su mapa y red. Esta acción no se puede deshacer.</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Mantener arrendatario</button>
                    <button type="button" class="btn btn-danger" onclick="confirmAction()">Eliminar arrendatario</button>
                    <button type="button" class="btn btn-warning" onclick="cancelAction()">Cancelar</button>
                </div>
            </div>
        </div>
    </div>


<script>
    fetch('/data/ingresos')
        .then(response => response.json())
        .then(data => {
            const ctx = document.getElementById('ingresosChart').getContext('2d');
            new Chart(ctx, {
                type: 'line',
                data: {
                    labels: data.meses,
                    datasets: [{
                        label: '',
                        data: data.valores,
                        borderColor: 'rgba(75, 192, 192, 1)',
                        backgroundColor: 'rgba(75, 192, 192, 0.2)',
                        borderWidth: 2,
                        tension: 0.4,
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false // Ocultar leyenda
                        }
                    },
                    scales: {
                        x: {
                            grid: {
                                display: false // Ocultar líneas de cuadrícula
                            },
                            ticks: {
                                display: false // Ocultar etiquetas del eje X
                            }
                        },
                        y: {
                            grid: {
                                display: false // Ocultar líneas de cuadrícula
                            },
                            ticks: {
                                display: false // Ocultar etiquetas del eje Y
                            },
                            beginAtZero: true
                        }
                    },
                    elements: {
                        point: {
                            radius: 0 // Eliminar puntos en el gráfico
                        }
                    }
                }
            });
        });

    function validatePassword() {
        const correctPassword = "12345"; // Cambiar por la clave deseada
        const userPassword = document.getElementById("passwordInput").value;
        const errorAlert = document.getElementById("errorAlert");

        if (userPassword === correctPassword) {
            errorAlert.classList.add("d-none");
            alert("Acceso concedido");
            $('#passwordModal').modal('hide');
        } else {
            errorAlert.classList.remove("d-none");
        }
    }

</script>

{% endblock %}



